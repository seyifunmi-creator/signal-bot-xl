# ml_model.pkl
import pickle
from sklearn.ensemble import RandomForestClassifier

# -----------------------------
# Step 1: Train a dummy model
# -----------------------------
# Replace this with your real data/model if available
X = [[0,0],[1,1],[2,2],[3,3]]
y = [0,1,1,0]

model = RandomForestClassifier()
model.fit(X, y)

# -----------------------------
# Step 2: Save as pickle protocol 4
# -----------------------------
with open("ml_model.pkl", "wb") as f:
    pickle.dump(model, f, protocol=4)

print("✅ Clean ml_model.pkl created with protocol 4")

# -----------------------------
# Step 3: Test loading it immediately
# -----------------------------
with open("ml_model.pkl", "rb") as f:
    loaded_model = pickle.load(f)

print("✅ Model loaded successfully!")
